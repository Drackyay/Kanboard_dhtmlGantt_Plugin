/* 
 * CSP-compliant fixes for DHTMLX Gantt GPL
 * Replace icon fonts with simple text/symbols
 */

/* Force all gantt elements to use system fonts instead of icon fonts */
[class*="gantt_"]::before,
[class*="gantt_"]:before,
[class*="gantt_"]::after,
[class*="gantt_"]:after,
[class*="dhx_"]::before,
[class*="dhx_"]:before,
[class*="dhx_"]::after,
[class*="dhx_"]:after {
    font-family: Arial, sans-serif !important;
}

/* Tree expand/collapse icons - use simple arrows */
.gantt_tree_icon.gantt_open::before,
.gantt_tree_icon.gantt_open:before {
    content: '▼' !important;
    font-family: Arial, sans-serif !important;
    font-size: 10px !important;
}

.gantt_tree_icon.gantt_close::before,
.gantt_tree_icon.gantt_close:before {
    content: '▶' !important;
    font-family: Arial, sans-serif !important;
    font-size: 10px !important;
}

/* Add Task button - replace icon with "+" */
.gantt_grid_head_add::before,
.gantt_grid_head_add:before,
.gantt_add::before,
.gantt_add:before {
    content: '+' !important;
    font-family: Arial, sans-serif !important;
    font-size: 18px !important;
    font-weight: bold !important;
}

/* Delete button - replace icon with "×" */
.gantt_delete_btn::before,
.gantt_delete_btn:before {
    content: '×' !important;
    font-family: Arial, sans-serif !important;
    font-size: 20px !important;
    font-weight: bold !important;
}

/* Sort icons - replace with arrows */
.gantt_asc::before,
.gantt_asc:before {
    content: '↑' !important;
    font-family: Arial, sans-serif !important;
    font-size: 14px !important;
}

.gantt_desc::before,
.gantt_desc:before {
    content: '↓' !important;
    font-family: Arial, sans-serif !important;
    font-size: 14px !important;
}

/* Link/arrow icons */
.gantt_link_arrow::before,
.gantt_link_arrow:before {
    content: '→' !important;
    font-family: Arial, sans-serif !important;
    font-size: 12px !important;
}

/* Make dependency arrow heads bigger */
.gantt_task_link .gantt_link_arrow {
    width: 0 !important;
    height: 0 !important;
    border-style: solid !important;
    border-width: 7px 0 7px 10px !important; /* Bigger arrow head */
    border-color: transparent transparent transparent #4a8f43 !important;
}

/* Any remaining icon elements that need to be replaced */
.dhx_gantt_icon::before,
.dhx_gantt_icon:before {
    font-family: Arial, sans-serif !important;
    content: '•' !important;
    font-size: 16px !important;
}
/* ========================================
 * DARK MODE COMPATIBILITY
 * Ensure text is visible in Galaxy/dark themes
 * ======================================== */

/* Gantt grid headers and cells - ensure contrast */
.gantt_grid_head_cell,
.gantt_grid_head_cell *,
.gantt_cell {
    color: inherit !important;
}

/* Task text in grid */
.gantt_tree_content,
.gantt_cell,
.gantt_grid_data .gantt_cell {
    color: inherit !important;
}

/* Timeline headers */
.gantt_scale_line,
.gantt_scale_cell,
.gantt_task_scale .gantt_scale_cell {
    color: inherit !important;
}

/* Task bars text */
.gantt_task_content,
.gantt_side_content {
    color: #000 !important; /* Keep task bar text dark as bars are colored */
}

/* Buttons and controls */
.gantt_grid_head_add,
.gantt_add,
.gantt_delete_btn {
    color: inherit !important;
}

/* Lightbox (popup) text */
.gantt_cal_light,
.gantt_cal_light_wide,
.gantt_cal_light .gantt_title,
.gantt_cal_light input,
.gantt_cal_light select,
.gantt_cal_light textarea {
    color: #333 !important;
    background-color: #fff !important;
}

/* Links/dependency arrows - keep visible */
.gantt_task_link,
.gantt_line_wrapper {
    opacity: 1 !important;
}

/* Tooltip text */
.gantt_tooltip {
    color: #333 !important;
    background-color: #fff !important;
    border: 1px solid #ccc !important;
}

/* ========================================
 * TOOLBAR & CONTROLS - DARK MODE
 * Remove hardcoded colors to let theme apply
 * ======================================== */

/* Group by dropdown label and icon */
.fa-users,
#dhtmlx-group-by,
.dhtmlx-gantt-toolbar .fa-users,
.dhtmlx-gantt-toolbar span {
    /* Remove any hardcoded colors - let theme apply naturally */
}

/* Checkbox labels (Move dependencies, Show progress bars) */
.dhtmlx-toggle,
.dhtmlx-toggle label,
label.dhtmlx-toggle {
    /* Remove any hardcoded colors - let theme apply naturally */
}

.dhtmlx-toggle input[type="checkbox"] {
    /* Keep checkboxes visible */
}

/* ========================================
 * LEGEND - DARK MODE
 * Remove hardcoded colors to let theme apply
 * ======================================== */

/* Legend section and all text within - NO color overrides */
.dhtmlx-gantt-info,
.dhtmlx-info-section,
.dhtmlx-info-section h3,
.dhtmlx-legend-two-column,
.dhtmlx-legend-column,
.dhtmlx-legend-column strong,
.dhtmlx-legend-column span,
.dhtmlx-legend-item,
.dhtmlx-legend-item span {
    /* Let theme colors apply naturally - don't override */
}

/* Legend headers (Task Types, Task Categories) */
.dhtmlx-legend-column strong {
    /* No opacity override */
}

/* Legend note text */
.dhtmlx-legend-note {
    /* Let theme apply */
}

/* No categories message */
.dhtmlx-no-categories {
    /* Let theme apply */
}

/* ========================================
 * WORKLOAD PANEL - DARK MODE
 * ======================================== */

/* Workload panel text - let theme apply */
.workload-header h4,
.workload-loading,
.workload-task-list {
    /* No color override */
}

/* Stats in workload view - let theme apply */
.dhtmlx-stat-label,
.dhtmlx-stat-value {
    /* No color override */
}
